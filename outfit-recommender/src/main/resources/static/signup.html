<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>회원가입</title>
    <link rel="stylesheet" href="/css/styles.css" />
</head>
<body class="container">
<h1>회원가입</h1>
<form id="signupForm">
    <label>이름 <input name="name" required></label>
    <label>나이 <input name="age" type="number" required></label>
    <label>성별 <input name="gender" placeholder="남/여/기타"></label>
    <label>이메일 <input name="email" type="email" required></label>
    <label>아이디 <input name="username" required></label>
    <label>비밀번호 <input name="password" type="password" required></label>
    <button>가입</button>
</form>
<p><a href="/login.html">로그인</a></p>

<script type="module">
    import { api } from "/app.js";

    const form = document.getElementById("signupForm");
    if (form) {
        form.addEventListener("submit", async (e) => {
            e.preventDefault();
            const fd = new FormData(form);
            const body = Object.fromEntries(fd.entries());
            body["age"] = Number(body["age"]);
            await api("/api/users/signup", { method: "POST", body: JSON.stringify(body) });
            alert("회원가입 성공! 로그인하세요.");
            location.href = "/login.html";
        });
    }
</script>
</body>
</html>
